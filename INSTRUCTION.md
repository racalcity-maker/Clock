# Инструкция (для чайников)

Короткая пошаговая инструкция для первого запуска и ежедневного использования.

## 1) Что нужно

- ESP32 (WROOM класс).
- 4-разрядный 7-сегментный индикатор + 74HC595.
- SD карта (FAT32).
- I2S DAC PCM5102 (или совместимый).
- Энкодер с кнопкой.
- Питание 5V (логика 3.3V).

Подробная распиновка: `WIRING.md`.

## 2) Первое включение

- Если время не задано, дисплей показывает `--:--`.
- В режиме часов (`CLCK`) будет отображаться время, когда оно задано вручную или синхронизировано по Wi-Fi.

## 3) Управление

- Поворот энкодера: навигация и изменение значений.
- Короткое нажатие: подтверждение/вход.
- Длинное нажатие: вход в меню или шаг назад.

## 4) Режимы

- `CLCK` - часы.
- `PLYR` - плеер с SD.
- `BLUE` - Bluetooth приёмник.

## 5) Установка времени

1. Длинное нажатие -> меню.
2. `SEt ` -> `CLOC`.
3. Поверните для изменения часов/минут.
4. Короткое нажатие переключает часы/минуты и сохраняет.

## 6) Будильник

1. Длинное нажатие -> меню.
2. `SEt ` -> `ALr `.
3. Доступные пункты:
   - `ALOn`/`ALOF` (вкл/выкл будильник)
   - `ALt ` (время)
   - `ALvL` (громкость)
   - `ton ` (тон/трек)
   - `rEP ` (повторы)
   - `AtYP` (тип расписания)

В Bluetooth режиме выбор `ton ` блокируется и показывает `frbd`.

## 7) Плеер (SD)

- Музыка: `/sdcard/music` (MP3/WAV).
- Запустите `PLYR`, управляйте энкодером.

## 8) Будильник с SD

- Файлы будильника: `/sdcard/alarm` (MP3).
- При наличии файлов будильник играет их в режимах `CLCK/PLYR`.
- В `BLUE` всегда используется встроенный тон.

## 9) Bluetooth

1. Перейдите в `BLUE`.
2. На телефоне найдите устройство и подключитесь.
3. Громкость синхронизируется через AVRCP.

## 10) Wi-Fi (ручная настройка)

1. Меню -> `SEt ` -> `InOn`.
2. Подключитесь к AP: `ClockSetup` / пароль `12345678`.
3. Откройте `http://192.168.4.1/wifi` и сохраните SSID/пароль.
4. Устройство перейдёт в STA, синхронизирует время и выключит интерфейс.

## 11) Сборка и прошивка

```bash
idf.py build
idf.py -p COMx flash monitor
```

## 12) Если что-то не работает

- Нет времени: проверьте Wi-Fi или задайте вручную.
- SD не видна: FAT32, корректная проводка, карта не в `LOCK`.
- BT не подключается: проверьте режим `BLUE` и удалите старую пару на телефоне.

Подробности по меню см. `MENU.md`.
