# Clock (ESP32 audio clock)

Прошивка для ESP32-устройства «часы/аудио»: 4-разрядный 7-сегментный дисплей, SD-плеер, Bluetooth A2DP приёмник и будильник.

## Что это

Устройство умеет показывать время, играть музыку с SD и по Bluetooth, а также запускать будильник по расписанию. Управление — энкодером и (опционально) ADC-кнопками.

## Возможности

- Часы с таймзоной и синхронизацией по NTP.
- Будильник с громкостью, повтором и выбором тона/трека.
- Плеер с SD (MP3/WAV), Helix MP3 декодер, PCM5102 I2S.
- Bluetooth A2DP sink с AVRCP и синхронизацией громкости.
- 2-полосный эквалайзер в аудио-тракте.
- Веб-настройка Wi-Fi (AP режим запускается вручную из меню).

## Режимы

- `CLCK` — часы.
- `PLYR` — плеер с SD.
- `BLUE` — Bluetooth приёмник.

Если время ещё не задано, дисплей показывает `--:--` (тире с двоеточием).

## SD карта

- Музыка: `/sdcard/music` (MP3/WAV).
- Будильник: `/sdcard/alarm` (MP3).

## Wi-Fi (ручная настройка)

1. Меню -> `SEt ` -> `InOn`.
2. Подключитесь к AP `ClockSetup`, пароль `12345678`.
3. Откройте `http://192.168.4.1/wifi` и сохраните SSID/пароль.
4. Устройство переключится в STA, синхронизирует время и выключит интерфейс.

## Быстрый старт (сборка/прошивка)

```bash
idf.py build
idf.py -p COMx flash monitor
```

## Документация

- `ARCHITECTURE.md` — архитектура (EN).
- `ARCHITECTURE.ru.md` — архитектура (RU).
- `INSTRUCTION.md` — инструкция для новичков (RU).
- `MENU.md` — подробное меню (RU).
- `WIRING.md` — распиновка и подключение (RU).
- `PROBLEMS.md` — известные проблемы.

## Структура проекта

- `main/app` — режимы UI, меню, обработчики ввода.
- `main/audio` — плеер, декодер, EQ, тоны, владение аудио.
- `main/connectivity` — Bluetooth, Wi-Fi/NTP, web config.
- `main/display` — драйвер дисплея и UI.
- `main/storage` — SD карта.
- `main/config` — конфиг и owner-задача.
- `build` — артефакты сборки (не редактировать).
